webpackJsonp([1],{"5LS5":function(e,t,n){"use strict";var r={name:"svg-icon",props:{type:String,className:String},render:function(e){var t=this.type,n=this.className;if(!t||"string"!=typeof t)return null;var r=this.renderSvg();return r?(/^#/.test(r),r="#"+t):(!0,r=t,/^#/.test(t)),e("svg",{attrs:{class:n}},[e("use",{attrs:{"xlink:href":r}})])},methods:{renderSvg:function(){var e=void 0;try{e=n("8nov")("./"+this.type+".svg")}catch(e){}finally{return e}}}},o=n("VU/8")(r,null,!1,null,null,null);t.a=o.exports},"8m4W":function(e,t){},"8nov":function(e,t,n){var r={"./dx-logo.svg":"QnnU"};function o(e){return n(a(e))}function a(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id="8nov"},FIU9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n("lRwf"),a=n.n(o),s={name:"user-login",data:function(){return{form:{loginName:"ruyang@fosun.com",password:"1"},rules:{loginName:[{required:!0,message:"请输入邮箱账户",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:["blur","change"]}]},fullscreenLoading:!1}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.fullscreenLoading=!0,t.$store.dispatch("login",t.form).then(function(){if(t.fullscreenLoading=!1,t.$route.query.redirect){var e=decodeURIComponent(t.$route.query.redirect),n=decodeURIComponent(t.$route.hash);console.log("redirect",e),console.log("hash",n),window.location.href=e+n}else window.location.href="/"}).catch(function(){t.fullscreenLoading=!1})})}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticClass:"container--login",attrs:{id:"app"}},[n("div",{staticClass:"main-content"},[n("div",{staticClass:"container"},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[n("div",{staticClass:"logo"},[n("svg-icon",{attrs:{type:"dx-logo",className:"svg"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"loginName"}},[n("el-input",{attrs:{placeholder:"邮箱账户"},model:{value:e.form.loginName,callback:function(t){e.$set(e.form,"loginName",t)},expression:"form.loginName"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password",placeholder:"邮箱密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}},[n("a",{staticClass:"forget",attrs:{slot:"append",href:"javascript:;"},slot:"append"},[e._v("忘记密码？")])])],1),e._v(" "),n("el-form-item",[n("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("立即登录")])],1)],1)],1),e._v(" "),n("div",{staticClass:"copyright"},[e._v("© 2018 天富星-移动端快速构建平台 版权所有 复星金服")])])])},staticRenderFns:[]},c=n("VU/8")(s,i,!1,null,null,null).exports,u=n("bOdI"),l=n.n(u),d=n("Xxa5"),f=n.n(d),m=n("exGp"),p=n.n(m),g=n("//Fk"),v=n.n(g),h=n("NYxO"),b=n("M9A7"),w=n("vMJZ"),y=n("zsD7"),O=n("VKKs"),x=n("kJdv");a.a.use(h.a);var N=new h.a.Store({actions:(r={},l()(r,"login",function(e,t){e.commit;var n=e.dispatch,r=t.loginName.trim();return new v.a(function(e,o){Object(b.a)(r,t.password).then(function(t){var r=t.data,o=r.result.access_token;r.code;Object(y.c)(x.a.TOKEN,o),n("userInfo"),e()}).catch(function(e){o(e)})})}),l()(r,"userInfo",function(e){var t=this;e.commit;return p()(f.a.mark(function e(){var n,r,o,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.a)();case 2:n=e.sent,r=n.data,o=r.result,a=r.code,o&&200===a&&Object(O.c)(x.a.USER_INFO,o);case 7:case"end":return e.stop()}},e,t)}))()}),r)}),j=n("ojS1"),k=n("9JMe"),_=n("l6IN"),I=n.n(_),S=(n("8m4W"),n("eWL4"),n("5LS5"));a.a.config.productionTip=!1,a.a.use(I.a),a.a.component(S.a.name,S.a),Object(k.sync)(N,j.a),new a.a({router:j.a,store:N,render:function(e){return e(c)}}).$mount("#app")},M9A7:function(e,t,n){"use strict";t.a=function(e,t){var n={loginName:e,password:t};return Object(r.a)({url:"/auth/token",method:"post",data:n})},t.b=function(){return Object(r.a)({url:"/auth/token",method:"delete"})};var r=n("vLgD")},QnnU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("Wc9H"),o=n.n(r),a=n("IaZV"),s=n.n(a),i=new o.a({id:"dx-logo",use:"dx-logo-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="dx-logo"><defs><style type="text/css"></style></defs><path d="M645.12 652.8m-38.4 0a38.4 38.4 0 1 0 76.8 0 38.4 38.4 0 1 0-76.8 0Z" fill="#ffa30c" p-id="20041" data-spm-anchor-id="a313x.7781069.0.i3" class="" /><path d="M935.68 523.52c-3.84-57.6-3.84-107.52-8.96-156.16C911.36 232.96 851.2 128 718.08 78.08c-154.88-57.6-309.76-49.92-460.8 12.8-83.2 34.56-143.36 99.84-157.44 189.44-11.52 74.24-14.08 153.6-5.12 227.84 15.36 111.36 112.64 167.68 217.6 128 37.12-14.08 66.56-49.92 94.72-80.64 58.88-61.44 162.56-81.92 254.72-47.36 80.64 30.72 85.76 98.56 84.48 168.96 0 32 1.28 64-2.56 96-8.96 57.6-35.84 102.4-99.84 104.96-5.12 0-8.96 0-14.08-2.56-55.04-25.6-10.24-57.6-10.24-57.6 2.56-1.28 3.84-2.56 6.4-2.56 33.28-11.52 58.88-30.72 39.68-62.72-10.24-17.92-47.36-30.72-70.4-28.16-62.72 6.4-104.96 64-102.4 126.72 2.56 67.84 52.48 120.32 125.44 131.84 113.92 19.2 211.2-32 263.68-135.68 52.48-107.52 53.76-220.16 53.76-323.84zM651.52 396.8c-24.32 0-44.8-20.48-44.8-44.8S627.2 307.2 651.52 307.2s44.8 20.48 44.8 44.8-19.2 44.8-44.8 44.8z" fill="#218bf6" p-id="20042" data-spm-anchor-id="a313x.7781069.0.i0" class="" /></symbol>'});s.a.add(i);t.default=i},VKKs:function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return i});var r=n("mvHQ"),o=n.n(r),a=function(e,t){e&&("string"!=typeof t&&(t=o()(t)),window.localStorage.setItem(e,t))},s=function(e){if(e)return JSON.parse(window.localStorage.getItem(e))},i=function(e){e&&window.localStorage.removeItem(e)}},eWL4:function(e,t){},kJdv:function(e,t,n){"use strict";t.a={TOKEN:"Admin-Token",USER_INFO:"CURRENT_USER_INFO"}},l6IN:function(e,t){e.exports=ELEMENT},ojS1:function(e,t,n){"use strict";(function(e){var r=n("lRwf"),o=n.n(r),a=n("/ocq");o.a.use(a.a);var s=new a.a({base:e,routes:[]});s.beforeEach(function(e,t,n){e.meta,e.name,e.path;document.title="登录",n()}),t.a=s}).call(t,"/")},vLgD:function(e,t,n){"use strict";var r=n("//Fk"),o=n.n(r),a=n("mtWM"),s=n.n(a),i=n("l6IN"),c=(n.n(i),n("zsD7")),u=n("kJdv"),l=n("mw3O"),d=n.n(l),f=s.a.create({baseURL:"/api",timeout:5e3,crossDomain:!0,xhrFields:{withCredentials:!0}});f.interceptors.request.use(function(e){return Object(c.a)(u.a.TOKEN)&&(e.headers.Authorization="Bearer "+Object(c.a)(u.a.TOKEN)),"post"!==e.method&&"put"!==e.method&&"delete"!==e.method||(e.data=d.a.stringify(e.data)),console.log(e),e},function(e){console.log(e),o.a.reject(e)}),f.interceptors.response.use(function(e){var t=e.data;return 200!==t.code?(Object(i.Message)({message:t.message,type:"error",duration:5e3}),100401!==t.code&&100412!==t.code&&100413!==t.code||i.MessageBox.confirm("你已被登出，可以取消继续留在该页面，或者重新登录","确定登出",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then(function(){Object(c.b)(u.a.TOKEN),location.reload()}),o.a.reject(t)):e},function(e){return console.log("err"+e),Object(i.Message)({message:e.message,type:"error",duration:5e3}),o.a.reject(e)}),t.a=f},vMJZ:function(e,t,n){"use strict";t.a=function(){return Object(r.a)({url:"/user",method:"get"})};var r=n("vLgD")},zsD7:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return u});var r=n("mvHQ"),o=n.n(r),a=n("lbHh"),s=n.n(a),i=function(e,t){e&&("string"!=typeof t&&(t=o()(t)),s.a.set(e,t))},c=function(e){if(e)return s.a.get(e)},u=function(e){e&&s.a.remove(e)}}},["FIU9"]);